# Anti-Fraud-Situational-Awareness（AFSA）前端设计文档



> 运行环境：Ubuntu 20.04、1C1G+40G轻量应用级云主机、腾讯云云数据库

## 一. 网站页面层次设计



### 1.1 功能分析，初步建立分块实现思路

由课程设计要求文档所述，**AFSA系统**需要实现以下功能

> - 信息库建立（database）：
>   - 诈骗电话号码库
>   - 诈骗邮箱库
>   - 诈骗网址库
> - 查询端口建立（search entrance/analysis result）：
>   - 电话号码查询
>   - 邮箱查询
>   - 网站分析
>   - 文本分析



因此前端至少需要两个**页面/URL**路径来实现展示，而从用户易用性角度来看还需要一个**索引页面（index）**来进行用户指引，因此首先需要实现三个页面呈现

> /index
>
> /database/?
>
> /analysis_result/?



### 1.2 页面功能分化

首先是**/database/?**，由于信息库庞杂，如果三个数据库信息都存放在同一页面进行展示则对内存以及读取速率有一定的要求，所以使用响应式页面跳转实现多表之间的数据呈现，首先查看数据库设计

```javascript
SE_db
	- phonenumber 	//电话号码表
	- website 		//网址表
	- msg 			//短信内容表
	- email			//邮箱表
```



目前的数据表有电话号码、网址、短信内容三个，因此由索引页面出发设计三个表的展示页面

> - /index/
>   - /index/fraud_phonenumber_list/
>   - /index/fraud_ip_list/
>   - /index/frauud_msg_list/
>   - /index/fraud_email_list/
> - /analysis_result



同时分析报告页面由**index**页面中的搜索引出，因此**analysis_result**也应该在index索引之中

> - /index/
>   - /index/fraud_phonenumber_list/
>   - /index/fraud_ip_list/
>   - /index/frauud_msg_list/
>   - /index/analysis_result



### 1.3 用户易用性功能设计

目前简单实现了概要设计说明书中的功能要求，但是从用户易用性角度出发并不是最好的设计。在流程设计上，用户首先接触到的是**index**页面，可以实施两种行为：

- 通过输入框输入想要查询的内容进入**analysis_result**页面，获取查询内容的诈骗系数分析；
- 通过三个按钮进入三个页面浏览信息库内容。



但是对于系统的目标用户来说，尽管多数时候可能是一次性查询行为，但是数据没有长时存在的话对于后续重新查看或者维护都不太方便，因此还需要实现一个历史查询分析报告功能，这一部分内容的实现可以通过数据库存储数据或者是云主机端本地调取html文件传输渲染，这是一个悬而未决的难点



### 1.4 待实现功能

- [ ] 历史查询功能实现
- [x] 信息库分页设计
- [x] 分析查询数值传输
- [ ] 分析页具体表图排布
- [x] 筛选框设计
- [ ] 后端整合
  - [ ] 词云图放置
  - [ ] 数据产生和图表展示




## 二. 具体页面设计

### 2.1 索引页/首页设计 ('/afsa/')

> <ip>:8001/afsa/

首页的基本功能是**索引**

需要展示的是系统的概览，比如目前系统中的**信息库种类占比**以及**分析模式**如何，同时需要给用户以指引，告知用户如何使用该系统，在此基础上再进行美化，比如部分信息库内容的展示，动态表格的设计，在风格上应当从简，以可视化元素为主



> **功能设计**
>
> - 导航功能
>   - 应当可以跳转到所有其他的功能性页面
> - 系统状态展示功能
>   - 展示当前后端运行情况
>   - 模型对各个类别数据的处理概览
> - 辅助功能
>   - 将部分的信息库功能展示给用户，让他们对支撑系统的数据有信心



### 2.2 信息库页面设计('/fraud_xx_list/?...')

信息库页面最重要的就是信息的展示，所有占据页面最大份额的应当是展示数据库内容的**table**，此外还有从用户易用性出发的辅助设计——滚动条、分页、跳转、筛选等快速查询功能，便于用户快速查找需要的内容。



> **功能设计**
>
> - 信息展示功能
>   - 从理论上来说可以将所有数据库中的内容展示给用户（以各种方式）
> - 辅助功能
>   - 分页展示，减少前端的渲染压力
>   - 筛选，通过一定的条件筛选出合适的数据进行展示



### 2.3 分析结果页面设计('/analysis_result/?...')

分析页面的组成由数据库支撑

> - （主键）时间戳id
> - 查询内容：字符串类型
> - 预测标签：0 / 1
> - 预测概率：保留了三位小数的float
> - 文本长度：整形
> - 关键词字典：key为词、value为词数
> - ...

